第七章 Ping程序
7.1 Ping介绍
Ping的目的是为了测试另一台主机是否可达，该程序发送一份ICMP回显请求报文主机，并等待返回ICMP回显应答。
可以用Ping程序来确定问题出在哪。Ping程序还能测出到这台主机的往返时间，以表明主机离我们有多远。
一台主机的可达性可能不只取决与IP层是否可达，还取决于使用何种协议以及端口号，Ping程序的运行结果可能显示某台主机不可达，但我们可以Talnet远程登陆到该台主机的25号端口。
7.2 Ping程序
Ping的程序为客户，被Ping的主机为服务器。大多数TCP/IP实现都在内核中直接支持Ping服务器。
 
Unix系统在实现Ping程序时是吧ICMP报文中的标识符字段设置成进程的ID号。
这样即使在同一个主机上同时运行多个Ping程序实例，Ping程序也可以识别出返回信息。
序列号从0开始，每次发一次新的回显请求就加1。Ping程序打印出返回的每个分组的序列号，允许我们查看是否有分组丢失、失序或重传。
Window下，不管开多少个窗口Ping的identifier都是相同的，而且每增加一个出去的Ping包序列号增加256。
7.3 IP记录路由选择
 
Code是一个字节，指明IP选项的类型。对于RR选项来说，他的值为7。
Len是RR选项总字节长度，这种情况下为39(尽管可以认为RR选项设置比最大长度小的长度，但是ping程序总是提供39字节的选项字段，最多可以记录9个IP地址。由于IP首部中留给选项的空间有限，他一般情况都设置成最大长度)。
Ptr称作指针字段。它是一个基于1的指针，指向存放下一个IP地址的位置。它的最小值为4，指向存放第一个IP地址的位置。随着每个IP地址存入清单，ptr值分别为8，12，16，最大为36。当记录下9个IP地址后ptr的值为40。
