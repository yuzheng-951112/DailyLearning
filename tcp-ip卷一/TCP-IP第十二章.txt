第十二章 广播和多播
12.2 单播、广播和多播
单播：单播地址是IP网络中最常见的。包含单播目标地址的分组发送给特定主机，一个这样的例子是，IP地址为192.168.1.5(源地址)的主机向IP地址为192.168.1.200(目标地址)的服务器请求网页。
要发送和接收单播分组，IP分组报头中必须有一个目标IP地址，而以太网帧报头中必须有相应的目标MAC地址。IP地址和MAC地址一起将数据传送到特定的目标主机。
广播：广播分组的目标IP地址的主机部分全为1，这意味着本地网络(广播域)中的所有主机都将接收并查看该分组。诸如ARP和DHCP等很多网络协议都使用广播。
C类网络192.168.1.0的默认子网掩码为255.255.255.0，其广播地址为192.168.1.255，其主机部分十进制数255或二进制数11111111(全为1)；
B类网络172.16.0.0的默认子网掩码为255.255.0.0，其广播地址为172.16.255.255；
A类网络10.0.0.0的默认子网掩码为255.0.0.0，其广播地址为10.255.255.255。
在以太网帧中，必须包含与广播IP地址对应的广播MAC地址。在以太网中，广播MAC地址长48位，其十进制表示为FF-FF-FF-FF-FF-FF。
	多播：多播地址让源设备能够将分组发送给一组设备。属于多播组的设备将被分配一个多播组IP地址，多播地址范围为224.0.0.0~239.255.255.255。由于多播地址表示一组设备，因此只能作用分组的目标地址。源地址总是为单播地址。
12.3 smurf攻击
R2(config-if)#ip directed-broadcast (允许广播)
R1#debug ip icmp
试验一：
 
（a）拓扑图
 
（b）ping 192.168.1.2(源地址为192.168.0.2)
 
（c）ping 192.168.1.2(源地址为1.1.1.1)
(a)R3(fa0/0 192.168.0.3)：设置默认路由(ip route 0.0.0.0 0.0.0.0 192.168.0.2)
  R2(fa0/0 192.168.0. 2)：设置允许广播通过(ip directed-broadcast(int fa1/0)，ip route 1.1.1.1 255.255.255.255 192.168.0.2)
  R1(fa0/0 192.168.0. 1 loopback 0 1.1.1.1 255.255.255.255)：设置默认路由(ip route 0.0.0.0 0.0.0.0 192.168.0.2)
(b)R1#ping 192.168.1.255 如图(b)R2和R3为同一网段，他们都会向R1的fa0/0发送icmp应答
(c)R1#ping 192.168.1.255 source lo 0 如图(c)R2和R3为同一网段，他们都会向R1的lo 0发送icmp应答
12.4 多播
多播组地址包括111 0的最高4bit和多播组号。他们通常可表示为点分十进制数，范围从224.0.0.0到239.255.255.255。
IP多播相对以的以太网地址范围从01:00:5e:00:00:00到01:00:5e:7f:ff:ff。
多播地址224.128.64.32(十六进制e0.80.40.20)和224.0.64.32(十六进制e0.00.40.20)都是映射为同一以太网01:00:5e:00:40:20。
既然地址映射是不唯一的，那么设备驱动程序或IP层就必须对数据进行过滤。因为网卡可能接收到主机不想接受的多播数据帧。
